# 《Smart QC Tools 关联图 (Relation Diagram) 模块》使用手册
**（软件著作权申请建议参考文档版本）**

---

## 1. 软件概述

### 1.1 软件名称及版本
**软件名称**：Smart QC Tools 工业级质量控制软件  
**版本号**：V1.0  
**功能模块**：关联图/关系逻辑分析模块 (Smart Relation Module)

### 1.2 开发背景与用途
关联图（Relation Diagram）用于分析复杂问题中各因素之间错综因果关系的非量化工具。本模块解决了传统鱼骨图难以表达“多因素交叉影响”及“因果回路”的局限。通过 **“Virtual Root” (虚拟核心)** 技术与 **G6 智能布局** 算法，自动识别并可视化末端因素、中间因素与核心症结的网络关系，广泛用于质量事故溯源、生产线复杂停机分析等场景。

---

## 2. 软件运行环境
（详见通用说明）

---

## 3. 核心功能及操作规程

### 3.1 虚拟核心与智能归集 (Virtual Root Logic)
**功能描述**：系统自动根据“图表标题”生成虚拟的核心节点（Root），无需用户手动创建。
**算法逻辑**：
- **末端因素 (End Factors)**：自动识别 In-Degree（入度）为 0 的节点，即“只有输出没有输入”的源头节点，界面标记为 **END**。
- **中间因素 (Middle Factors)**：既有输入又有输出的节点，作为传递介质。
- **自动连线**：所有未指定输出目标的节点（Sinks），系统会自动将其连接至虚拟核心节点，确保逻辑闭环。

### 3.2 深度网络交互 (Deep Network Rendering)
**功能描述**：支持 4 层级以上的深度因果网络展示。
**操作规程**：
1. **自动布局 (Layout Modes)**：
   - **单项汇集型 (Directional)**：标准的左→右层级布局 (Dagre算法)，逻辑清晰。
   - **中央集中型 (Centralized)**：核心在通过，因素环绕辐射 (Radial算法)，强调核心地位。
   - **关系自由型 (Free)**：力导向布局 (Force-Directed)，模拟自然引力，适合展示极复杂的网络。
2. **可视化导出**：支持导出透明背景的高清 PNG 及矢量级 PDF 报告。

### 3.3 DSL 描述语法规范
本模块采用声明式 DSL (Domain Specific Language) 定义图表。

**语法结构**：
```yaml
Title: [图表标题/核心症结]
Layout: [Directional/Centralized/Free]

# 样式定义
Color[Middle]: #8b5cf6
Color[End]: #ddd6fe
Color[Line]: #a78bfa

# 节点定义 (Node: ID, Label)
Node: m1, 模温异常
Node: e1, 水路堵塞
...

# 关系定义 (Rel: Source -> Target)
Rel: e1 -> m1
Rel: e2 -> m1
Rel: e2 -> m2  # 交叉引用示例
```

---

## 4. 技术特性亮点

1. **复杂网络解耦**：通过 G6 图引擎，轻松处理包含 50+ 节点、100+ 连线的大型因果网络，性能流畅。
2. **动态 In-Degree 标记**：实时计算节点入度，动态显示 END 标签，辅助用户快速识别需要治理的源头要因。
3. **多重交叉因果支持**：完美支持“一因多果”与“多因一果”的网状逻辑，突破了树状图的表达瓶颈。

---
*版本日期：2026年2月*  
* Smart QC Tools 关联图研发组 归档*
